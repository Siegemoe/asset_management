{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/asset_management/src/Sidebar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport Link from \"next/link\"\r\nimport Image from \"next/image\"\r\nimport { usePathname } from \"next/navigation\"\r\nimport { signOut } from \"next-auth/react\"\r\nimport { useSession } from \"next-auth/react\"\r\n\r\nexport default function Sidebar() {\r\n  const pathname = usePathname()\r\n  const { data: session } = useSession()\r\n\r\n  // Check if user has security access based on role\r\n  const hasSecurityAccess = session?.user?.role === 'SUPER_ADMIN' || session?.user?.role === 'ADMIN'\r\n\r\n  const navigationItems = [\r\n    {\r\n      name: \"Manage Organization\",\r\n      href: \"/dashboard\",\r\n      icon: (\r\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z\" />\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 5a2 2 0 012-2h4a2 2 0 012 2v1H8V5z\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      name: \"Manage Sites\",\r\n      href: \"/sites\",\r\n      icon: (\r\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      name: \"Manage Users\",\r\n      href: \"/admin/users\",\r\n      icon: (\r\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      name: \"Manage Assets\",\r\n      href: \"/assets\",\r\n      icon: (\r\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11H5m14-7H5m14 14H5\" />\r\n        </svg>\r\n      ),\r\n    },\r\n    {\r\n      name: \"Security\",\r\n      href: \"/security\",\r\n      icon: (\r\n        <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n        </svg>\r\n      ),\r\n      show: hasSecurityAccess,\r\n    },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"flex flex-col w-64 bg-gray-800 text-white h-full\">\r\n      {/* Logo/Header */}\r\n      <div className=\"flex items-center justify-center h-16 bg-gray-900\">\r\n        <Link href=\"/dashboard\" className=\"text-white font-semibold text-lg hover:text-gray-300 transition-colors\">\r\n          APM Asset Management\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"flex-1 px-4 py-6 space-y-2\">\r\n        {navigationItems\r\n          .filter((item) => item.show !== false) // Show all items except those explicitly set to false\r\n          .map((item) => (\r\n            <Link\r\n              key={item.name}\r\n              href={item.href}\r\n              className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                pathname === item.href\r\n                  ? \"bg-gray-700 text-white\"\r\n                  : \"text-gray-300 hover:bg-gray-700 hover:text-white\"\r\n              }`}\r\n            >\r\n              <span className=\"mr-3\">{item.icon}</span>\r\n              {item.name}\r\n            </Link>\r\n          ))}\r\n      </nav>\r\n\r\n      {/* Profile Section */}\r\n      <div className=\"p-4 border-t border-gray-700\">\r\n        {session?.user ? (\r\n          <div className=\"flex flex-col space-y-2\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"flex-shrink-0\">\r\n                {session.user.image ? (\r\n                  <Image\r\n                    src={session.user.image}\r\n                    alt={session.user.name || \"User\"}\r\n                    className=\"w-8 h-8 rounded-full\"\r\n                    width={32}\r\n                    height={32}\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center\">\r\n                    <span className=\"text-sm font-medium\">\r\n                      {(session.user.name || \"U\")[0]}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-medium text-white truncate\">\r\n                  {session.user.name}\r\n                </p>\r\n                <p className=\"text-xs text-gray-400 truncate\">\r\n                  {session.user.email}\r\n                </p>\r\n                {session.user.role && (\r\n                  <p className=\"text-xs text-gray-400\">\r\n                    Role: {session.user.role.replace('_', ' ')}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => signOut({ callbackUrl: '/login' })}\r\n              className=\"w-full px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition-colors\"\r\n            >\r\n              Sign Out\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"block w-full px-3 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition-colors text-center\"\r\n          >\r\n            Sign In\r\n          </Link>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 365, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/asset_management/src/DashboardLayout.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { SessionProvider } from \"next-auth/react\"\r\nimport Sidebar from \"./Sidebar\"\r\n\r\ninterface DashboardLayoutProps {\r\n  children: React.ReactNode\r\n}\r\n\r\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\r\n  return (\r\n    <SessionProvider>\r\n      <div className=\"flex h-screen bg-gray-100\">\r\n        <Sidebar />\r\n        <main className=\"flex-1 overflow-y-auto\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </SessionProvider>\r\n  )\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS,gBAAgB,EAAE,QAAQ,EAAwB;IACxE,qBACE,8OAAC,wJAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,0HAAO;;;;;8BACR,8OAAC;oBAAK,WAAU;8BACb;;;;;;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/asset_management/src/components/ui/StatusBadge.tsx"],"sourcesContent":["interface StatusBadgeProps {\r\n  status: string\r\n  type?: 'site' | 'room' | 'asset'\r\n  className?: string\r\n}\r\n\r\nconst siteStatusConfig = {\r\n  ACTIVE: { color: 'bg-green-100 text-green-800', label: 'Active' },\r\n  SUSPENDED: { color: 'bg-yellow-100 text-yellow-800', label: 'Suspended' },\r\n  ARCHIVED: { color: 'bg-gray-100 text-gray-800', label: 'Archived' },\r\n}\r\n\r\nconst roomStatusConfig = {\r\n  OCCUPIED: { color: 'bg-green-100 text-green-800', label: 'Occupied' },\r\n  VACANT: { color: 'bg-red-100 text-red-800', label: 'Vacant' },\r\n  READY: { color: 'bg-yellow-100 text-yellow-800', label: 'Ready' },\r\n}\r\n\r\nconst assetStatusConfig = {\r\n  ACTIVE: { color: 'bg-green-100 text-green-800', label: 'Active' },\r\n  MAINTENANCE: { color: 'bg-yellow-100 text-yellow-800', label: 'Maintenance' },\r\n  RETIRED: { color: 'bg-gray-100 text-gray-800', label: 'Retired' },\r\n}\r\n\r\nexport default function StatusBadge({ status, type = 'site', className = '' }: StatusBadgeProps) {\r\n  let config: Record<string, { color: string; label: string }>\r\n  \r\n  if (type === 'room') {\r\n    config = roomStatusConfig\r\n  } else if (type === 'asset') {\r\n    config = assetStatusConfig\r\n  } else {\r\n    config = siteStatusConfig\r\n  }\r\n\r\n  const statusConfig = config[status] || { color: 'bg-gray-100 text-gray-800', label: status }\r\n  \r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusConfig.color} ${className}`}>\r\n      {statusConfig.label}\r\n    </span>\r\n  )\r\n}"],"names":[],"mappings":";;;;;;AAMA,MAAM,mBAAmB;IACvB,QAAQ;QAAE,OAAO;QAA+B,OAAO;IAAS;IAChE,WAAW;QAAE,OAAO;QAAiC,OAAO;IAAY;IACxE,UAAU;QAAE,OAAO;QAA6B,OAAO;IAAW;AACpE;AAEA,MAAM,mBAAmB;IACvB,UAAU;QAAE,OAAO;QAA+B,OAAO;IAAW;IACpE,QAAQ;QAAE,OAAO;QAA2B,OAAO;IAAS;IAC5D,OAAO;QAAE,OAAO;QAAiC,OAAO;IAAQ;AAClE;AAEA,MAAM,oBAAoB;IACxB,QAAQ;QAAE,OAAO;QAA+B,OAAO;IAAS;IAChE,aAAa;QAAE,OAAO;QAAiC,OAAO;IAAc;IAC5E,SAAS;QAAE,OAAO;QAA6B,OAAO;IAAU;AAClE;AAEe,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,MAAM,EAAE,YAAY,EAAE,EAAoB;IAC7F,IAAI;IAEJ,IAAI,SAAS,QAAQ;QACnB,SAAS;IACX,OAAO,IAAI,SAAS,SAAS;QAC3B,SAAS;IACX,OAAO;QACL,SAAS;IACX;IAEA,MAAM,eAAe,MAAM,CAAC,OAAO,IAAI;QAAE,OAAO;QAA6B,OAAO;IAAO;IAE3F,qBACE,8OAAC;QAAK,WAAW,CAAC,wEAAwE,EAAE,aAAa,KAAK,CAAC,CAAC,EAAE,WAAW;kBAC1H,aAAa,KAAK;;;;;;AAGzB","debugId":null}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/asset_management/src/app/sites/EnhancedSitesClient.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport Link from \"next/link\"\r\nimport StatusBadge from \"@/components/ui/StatusBadge\"\r\n\r\ninterface Site {\r\n  id: string\r\n  name: string\r\n  address: string | null\r\n  status: string\r\n  createdAt: string\r\n  _count: {\r\n    rooms: number\r\n    assets: number\r\n  }\r\n  rooms?: Room[]\r\n  assignedUsers: User[]\r\n}\r\n\r\ninterface Room {\r\n  id: string\r\n  name: string\r\n  status: string\r\n}\r\n\r\ninterface User {\r\n  id: string\r\n  name: string | null\r\n  email: string\r\n  role: string\r\n}\r\n\r\ninterface UserAssignment {\r\n  userId: string\r\n  role: string\r\n}\r\n\r\ninterface EnhancedSitesClientProps {\r\n  initialSites: Site[]\r\n}\r\n\r\nexport default function EnhancedSitesClient({ initialSites }: EnhancedSitesClientProps) {\r\n  const [sites, setSites] = useState<Site[]>(initialSites)\r\n  const [selectedSite, setSelectedSite] = useState<string | null>(null)\r\n  const [userAssignmentSiteId, setUserAssignmentSiteId] = useState<string | null>(null)\r\n  const [allUsers, setAllUsers] = useState<User[]>([])\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await fetch('/api/users')\r\n      if (response.ok) {\r\n        const users = await response.json()\r\n        setAllUsers(users)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Fetch all users for assignment\r\n    // eslint-disable-next-line react-hooks/set-state-in-effect\r\n    fetchUsers()\r\n  }, [])\r\n\r\n  const refreshSites = async () => {\r\n    try {\r\n      const response = await fetch('/api/sites')\r\n      if (response.ok) {\r\n        const updatedSites = await response.json()\r\n        setSites(updatedSites)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error refreshing sites:', error)\r\n    }\r\n  }\r\n\r\n  const handleStatusChange = async (siteId: string, newStatus: string) => {\r\n    if (!confirm(`Are you sure you want to ${newStatus.toLowerCase()} this site?`)) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/sites/${siteId}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ status: newStatus }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        await refreshSites()\r\n      } else {\r\n        const error = await response.json()\r\n        alert(error.error || 'Failed to update site status')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating site status:', error)\r\n      alert('An error occurred while updating the site status')\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (siteId: string) => {\r\n    if (!confirm('Are you sure you want to permanently delete this site? This action cannot be undone and will remove all associated rooms and assets.')) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/sites/${siteId}`, {\r\n        method: 'DELETE',\r\n      })\r\n\r\n      if (response.ok) {\r\n        await refreshSites()\r\n      } else {\r\n        const error = await response.json()\r\n        alert(error.error || 'Failed to delete site')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting site:', error)\r\n      alert('An error occurred while deleting the site')\r\n    }\r\n  }\r\n\r\n  const handleAssignUsers = async (siteId: string, userAssignments: UserAssignment[]) => {\r\n    try {\r\n      const response = await fetch(`/api/sites/${siteId}/assign-users`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ userAssignments }),\r\n      })\r\n\r\n      if (response.ok) {\r\n        await refreshSites()\r\n        setUserAssignmentSiteId(null)\r\n      } else {\r\n        const error = await response.json()\r\n        alert(error.error || 'Failed to assign users')\r\n      }\r\n    } catch (error) {\r\n      console.error('Error assigning users:', error)\r\n      alert('An error occurred while assigning users')\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Sites List */}\r\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\r\n        <div className=\"px-4 py-5 sm:px-6\">\r\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\r\n            Sites ({sites.length})\r\n          </h3>\r\n          <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">\r\n            Manage your locations, assign users, and control site status.\r\n          </p>\r\n        </div>\r\n        \r\n        <ul role=\"list\" className=\"divide-y divide-gray-200\">\r\n          {sites.map((site) => (\r\n            <li key={site.id}>\r\n              <div className=\"px-4 py-4 sm:px-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <h4 className=\"text-sm font-medium text-gray-900 truncate\">\r\n                        {site.name}\r\n                      </h4>\r\n                      <StatusBadge status={site.status} type=\"site\" />\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-500 truncate\">\r\n                      {site.address || 'No address provided'}\r\n                    </p>\r\n                    <div className=\"mt-2 flex items-center space-x-4 text-sm text-gray-500\">\r\n                      <span>{site._count.rooms} rooms</span>\r\n                      <span>{site._count.assets} assets</span>\r\n                      <span>{site.assignedUsers.length} assigned users</span>\r\n                    </div>\r\n                    \r\n                    {/* Room Badges */}\r\n                    {site.rooms && site.rooms.length > 0 && (\r\n                      <div className=\"mt-3\">\r\n                        <p className=\"text-xs text-gray-400 mb-2\">Rooms:</p>\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {site.rooms.map((room) => (\r\n                            <Link\r\n                              key={room.id}\r\n                              href={`/sites/${site.id}/rooms/${room.id}`}\r\n                              className=\"group\"\r\n                            >\r\n                              <span className=\"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-white border border-gray-200 text-gray-700 hover:border-indigo-300 hover:text-indigo-700 transition-colors\">\r\n                                {room.name}\r\n                                <StatusBadge status={room.status} type=\"room\" />\r\n                              </span>\r\n                            </Link>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {site.assignedUsers.length > 0 && (\r\n                      <div className=\"mt-2\">\r\n                        <p className=\"text-xs text-gray-400\">Assigned users:</p>\r\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                          {site.assignedUsers.slice(0, 3).map((user) => (\r\n                            <span key={user.id} className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\r\n                              {user.name || user.email} ({user.role})\r\n                            </span>\r\n                          ))}\r\n                          {site.assignedUsers.length > 3 && (\r\n                            <span className=\"text-xs text-gray-500\">\r\n                              +{site.assignedUsers.length - 3} more\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <button\r\n                      onClick={() => setSelectedSite(selectedSite === site.id ? null : site.id)}\r\n                      className=\"text-indigo-600 hover:text-indigo-900 text-sm font-medium\"\r\n                    >\r\n                      {selectedSite === site.id ? 'Hide' : 'Details'}\r\n                    </button>\r\n                    \r\n                    <button\r\n                      onClick={() => setUserAssignmentSiteId(userAssignmentSiteId === site.id ? null : site.id)}\r\n                      className=\"text-green-600 hover:text-green-900 text-sm font-medium\"\r\n                    >\r\n                      Assign Users\r\n                    </button>\r\n                    \r\n                    <Link\r\n                      href={`/sites/${site.id}/edit`}\r\n                      className=\"text-gray-600 hover:text-gray-900 text-sm font-medium\"\r\n                    >\r\n                      Edit\r\n                    </Link>\r\n                    \r\n                    {site.status === 'ACTIVE' && (\r\n                      <button\r\n                        onClick={() => handleStatusChange(site.id, 'SUSPENDED')}\r\n                        className=\"text-yellow-600 hover:text-yellow-900 text-sm font-medium\"\r\n                      >\r\n                        Suspend\r\n                      </button>\r\n                    )}\r\n                    \r\n                    {site.status === 'SUSPENDED' && (\r\n                      <button\r\n                        onClick={() => handleStatusChange(site.id, 'ACTIVE')}\r\n                        className=\"text-green-600 hover:text-green-900 text-sm font-medium\"\r\n                      >\r\n                        Activate\r\n                      </button>\r\n                    )}\r\n                    \r\n                    {site.status !== 'ARCHIVED' && (\r\n                      <button\r\n                        onClick={() => handleStatusChange(site.id, 'ARCHIVED')}\r\n                        className=\"text-orange-600 hover:text-orange-900 text-sm font-medium\"\r\n                      >\r\n                        Archive\r\n                      </button>\r\n                    )}\r\n                    \r\n                    <button\r\n                      onClick={() => handleDelete(site.id)}\r\n                      className=\"text-red-600 hover:text-red-900 text-sm font-medium\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Site Details */}\r\n                {selectedSite === site.id && (\r\n                  <div className=\"mt-4 p-4 bg-gray-50 rounded-md\">\r\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                      <div>\r\n                        <span className=\"font-medium text-gray-700\">Created:</span>\r\n                        <p className=\"text-gray-600\">{new Date(site.createdAt).toLocaleDateString()}</p>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium text-gray-700\">Last Updated:</span>\r\n                        <p className=\"text-gray-600\">{new Date(site.createdAt).toLocaleDateString()}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* User Assignment Interface */}\r\n                {userAssignmentSiteId === site.id && (\r\n                  <UserAssignmentInterface\r\n                    site={site}\r\n                    allUsers={allUsers}\r\n                    onAssignUsers={handleAssignUsers}\r\n                    onCancel={() => setUserAssignmentSiteId(null)}\r\n                  />\r\n                )}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        \r\n        {sites.length === 0 && (\r\n          <div className=\"px-4 py-8 text-center text-gray-500\">\r\n            No sites found. <Link href=\"/sites/new\" className=\"text-indigo-600 hover:text-indigo-900\">Add one</Link>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// User Assignment Component\r\ninterface UserAssignmentInterfaceProps {\r\n  site: Site\r\n  allUsers: User[]\r\n  onAssignUsers: (siteId: string, assignments: UserAssignment[]) => void\r\n  onCancel: () => void\r\n}\r\n\r\nfunction UserAssignmentInterface({ site, allUsers, onAssignUsers, onCancel }: UserAssignmentInterfaceProps) {\r\n  const [selectedUsers, setSelectedUsers] = useState<Set<string>>(new Set(site.assignedUsers.map(u => u.id)))\r\n  const [roles, setRoles] = useState<Record<string, string>>({})\r\n\r\n  const handleUserToggle = (userId: string) => {\r\n    const newSelected = new Set(selectedUsers)\r\n    if (newSelected.has(userId)) {\r\n      newSelected.delete(userId)\r\n      const newRoles = { ...roles }\r\n      delete newRoles[userId]\r\n      setRoles(newRoles)\r\n    } else {\r\n      newSelected.add(userId)\r\n      setRoles(prev => ({ ...prev, [userId]: 'SITE_MANAGER' }))\r\n    }\r\n    setSelectedUsers(newSelected)\r\n  }\r\n\r\n  const handleRoleChange = (userId: string, role: string) => {\r\n    setRoles(prev => ({ ...prev, [userId]: role }))\r\n  }\r\n\r\n  const handleSubmit = () => {\r\n    const assignments = Array.from(selectedUsers).map(userId => ({\r\n      userId,\r\n      role: roles[userId] || 'SITE_MANAGER'\r\n    }))\r\n    onAssignUsers(site.id, assignments)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-md\">\r\n      <h5 className=\"text-sm font-medium text-gray-900 mb-3\">\r\n        Assign Users to {site.name}\r\n      </h5>\r\n      \r\n      <div className=\"space-y-2 max-h-40 overflow-y-auto\">\r\n        {allUsers.map((user) => (\r\n          <div key={user.id} className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              id={`user-${user.id}`}\r\n              checked={selectedUsers.has(user.id)}\r\n              onChange={() => handleUserToggle(user.id)}\r\n              className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n            />\r\n            <label htmlFor={`user-${user.id}`} className=\"flex-1\">\r\n              <span className=\"text-sm text-gray-900\">\r\n                {user.name || user.email}\r\n              </span>\r\n              <span className=\"text-sm text-gray-500 ml-2\">({user.role})</span>\r\n            </label>\r\n            {selectedUsers.has(user.id) && (\r\n              <select\r\n                value={roles[user.id] || 'SITE_MANAGER'}\r\n                onChange={(e) => handleRoleChange(user.id, e.target.value)}\r\n                className=\"text-sm border-gray-300 rounded-md\"\r\n              >\r\n                <option value=\"SITE_MANAGER\">Site Manager</option>\r\n                <option value=\"ADMIN\">Admin</option>\r\n              </select>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"mt-4 flex justify-end space-x-3\">\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"px-3 py-1 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleSubmit}\r\n          className=\"px-3 py-1 text-sm bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\r\n        >\r\n          Assign {selectedUsers.size} User(s)\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}