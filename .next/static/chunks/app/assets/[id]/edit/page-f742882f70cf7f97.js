(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2949],{4409:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(2115),i=t(3321),d=t(8500),l=t.n(d),o=t(9003),n=t(3546),m=t(3530);let c=m.Ikc({brand:m.YjP().min(1,"Brand is required"),manufacturerPart:m.YjP().min(1,"Manufacturer part number is required"),serialNumber:m.YjP().min(1,"Serial number is required"),siteId:m.YjP().min(1,"Site is required"),roomNumber:m.YjP().min(1,"Room number is required"),installedDate:m.YjP().min(1,"Installed date is required"),type:m.k5n(["WASHER","DRYER","DISH_WASHER","REFRIGERATOR","AIR_CONDITIONER","OVEN_STOVE"]),imageUrl:m.YjP().optional()});function u({params:e}){let s=(0,i.useRouter)(),[t,d]=(0,a.useState)(null),[m,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[g,b]=(0,a.useState)(!1),[f,p]=(0,a.useState)(""),{register:j,handleSubmit:N,formState:{errors:y},setValue:w}=(0,o.mN)({resolver:(0,n.u)(c)});(0,a.useEffect)(()=>{(async()=>{try{let s=await e;p(s.id);let[t,r]=await Promise.all([fetch(`/api/assets/${s.id}`),fetch("/api/sites")]);if(t.ok&&r.ok){let e=await t.json(),s=await r.json();d(e),u(s),w("brand",e.brand),w("manufacturerPart",e.manufacturerPart),w("serialNumber",e.serialNumber),w("siteId",e.siteId),w("roomNumber",e.roomNumber),w("installedDate",e.installedDate.split("T")[0]),w("type",e.type),w("imageUrl",e.images.length>0?e.images[0].url:"")}else console.error("Failed to fetch data")}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}})()},[e,w]);let v=async e=>{b(!0);try{let t=await fetch(`/api/assets/${f}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)s.push("/assets");else{let e=await t.json();alert(e.error||"Failed to update asset")}}catch(e){console.error("Error:",e),alert("An error occurred while updating the asset")}finally{b(!1)}},k=async()=>{if(confirm("Are you sure you want to delete this asset? This action cannot be undone."))try{let e=await fetch(`/api/assets/${f}`,{method:"DELETE"});if(e.ok)s.push("/assets");else{let s=await e.json();alert(s.error||"Failed to delete asset")}}catch(e){console.error("Error:",e),alert("An error occurred while deleting the asset")}};return x?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white py-8 px-6 shadow-lg rounded-lg",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(l(),{href:`/assets/${t.id}`,className:"text-indigo-600 hover:text-indigo-900 text-sm font-medium",children:"â† Back to Asset"})}),(0,r.jsxs)("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:["Edit Asset ",t.assetNumber]}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Update the details for this asset."})]}),(0,r.jsxs)("form",{onSubmit:N(v),className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Asset Type"}),(0,r.jsxs)("select",{...j("type"),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[(0,r.jsx)("option",{value:"",children:"Select type"}),(0,r.jsx)("option",{value:"WASHER",children:"Washer"}),(0,r.jsx)("option",{value:"DRYER",children:"Dryer"}),(0,r.jsx)("option",{value:"DISH_WASHER",children:"Dish Washer"}),(0,r.jsx)("option",{value:"REFRIGERATOR",children:"Refrigerator"}),(0,r.jsx)("option",{value:"AIR_CONDITIONER",children:"Air Conditioner"}),(0,r.jsx)("option",{value:"OVEN_STOVE",children:"Oven/Stove"})]}),y.type&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.type.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Brand"}),(0,r.jsx)("input",{...j("brand"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.brand&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.brand.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Manufacturer Part Number"}),(0,r.jsx)("input",{...j("manufacturerPart"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.manufacturerPart&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.manufacturerPart.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Serial Number"}),(0,r.jsx)("input",{...j("serialNumber"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.serialNumber&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.serialNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Site"}),(0,r.jsxs)("select",{...j("siteId"),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[(0,r.jsx)("option",{value:"",children:"Select site"}),m.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),y.siteId&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.siteId.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Room Number"}),(0,r.jsx)("input",{...j("roomNumber"),type:"text",placeholder:"e.g., 101, 2A",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.roomNumber&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.roomNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Installed Date"}),(0,r.jsx)("input",{...j("installedDate"),type:"date",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.installedDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.installedDate.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL (optional)"}),(0,r.jsx)("input",{...j("imageUrl"),type:"url",placeholder:"https://example.com/image.jpg",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}),y.imageUrl&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:y.imageUrl.message})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("button",{type:"button",onClick:k,className:"bg-red-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Delete Asset"}),(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)(l(),{href:`/assets/${t.id}`,className:"bg-gray-200 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:g,className:"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:g?"Updating...":"Update Asset"})]})]})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Asset Not Found"}),(0,r.jsx)(l(),{href:"/assets",className:"text-indigo-600 hover:text-indigo-900",children:"Back to Assets"})]})})}},4770:(e,s,t)=>{Promise.resolve().then(t.bind(t,4409))}},e=>{e.O(0,[8500,3530,6802,8441,3794,7358],()=>e(e.s=4770)),_N_E=e.O()}]);