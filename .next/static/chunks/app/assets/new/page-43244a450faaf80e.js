(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4751],{79:(e,s,t)=>{Promise.resolve().then(t.bind(t,2475))},2475:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(2115),i=t(3321),l=t(8500),d=t.n(l),o=t(9003),n=t(3546),c=t(3530),m=t(7872);let x=c.Ikc({brand:c.YjP().min(1,"Brand is required"),manufacturerPart:c.YjP().min(1,"Manufacturer part number is required"),serialNumber:c.YjP().min(1,"Serial number is required"),siteId:c.YjP().min(1,"Site is required"),roomId:c.YjP().min(1,"Room is required"),installedDate:c.YjP().min(1,"Installed date is required"),type:c.k5n(["WASHER","DRYER","DISH_WASHER","REFRIGERATOR","AIR_CONDITIONER","OVEN_STOVE"]),imageUrl:c.YjP().optional()});function u(){let e=(0,i.useRouter)(),[s,t]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[b,g]=(0,a.useState)(!1),{register:f,handleSubmit:p,formState:{errors:j},watch:N}=(0,o.mN)({resolver:(0,n.u)(x)}),y=N("siteId");(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/sites");if(e.ok){let s=await e.json();t(s)}else console.error("Failed to fetch sites")}catch(e){console.error("Error fetching sites:",e)}finally{h(!1)}})()},[]),(0,a.useEffect)(()=>{y?(async()=>{try{let e=await fetch(`/api/sites/${y}/rooms`);if(e.ok){let s=await e.json();c(s)}else c([])}catch(e){console.error("Error fetching rooms:",e),c([])}})():c([])},[y]);let w=async s=>{g(!0);try{let t=await fetch("/api/assets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(t.ok)e.push("/assets");else{let e=await t.json();alert(e.error||"Failed to create asset")}}catch(e){console.error("Error:",e),alert("An error occurred while creating the asset")}finally{g(!1)}};return u?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-indigo-600"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsx)(m.default,{items:[{label:"Dashboard",href:"/dashboard"},{label:"Assets",href:"/assets"},{label:"Add New Asset"}]}),(0,r.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add New Asset"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Fill in the details for the new appliance asset."}),(0,r.jsxs)("form",{onSubmit:p(w),className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Asset Type"}),(0,r.jsxs)("select",{...f("type"),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black",children:[(0,r.jsx)("option",{value:"",children:"Select type"}),(0,r.jsx)("option",{value:"WASHER",children:"Washer"}),(0,r.jsx)("option",{value:"DRYER",children:"Dryer"}),(0,r.jsx)("option",{value:"DISH_WASHER",children:"Dish Washer"}),(0,r.jsx)("option",{value:"REFRIGERATOR",children:"Refrigerator"}),(0,r.jsx)("option",{value:"AIR_CONDITIONER",children:"Air Conditioner"}),(0,r.jsx)("option",{value:"OVEN_STOVE",children:"Oven/Stove"})]}),j.type&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.type.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Brand"}),(0,r.jsx)("input",{...f("brand"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black"}),j.brand&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.brand.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Manufacturer Part Number"}),(0,r.jsx)("input",{...f("manufacturerPart"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black"}),j.manufacturerPart&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.manufacturerPart.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Serial Number"}),(0,r.jsx)("input",{...f("serialNumber"),type:"text",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black"}),j.serialNumber&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.serialNumber.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Site"}),(0,r.jsxs)("select",{...f("siteId"),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black",children:[(0,r.jsx)("option",{value:"",children:"Select site"}),s.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.siteId&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.siteId.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Room"}),(0,r.jsxs)("select",{...f("roomId"),disabled:!y||0===l.length,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,r.jsx)("option",{value:"",children:y?0===l.length?"No rooms available":"Select room":"Select site first"}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),j.roomId&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.roomId.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Installed Date"}),(0,r.jsx)("input",{...f("installedDate"),type:"date",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black"}),j.installedDate&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.installedDate.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL (optional)"}),(0,r.jsx)("input",{...f("imageUrl"),type:"url",placeholder:"https://example.com/image.jpg",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-black"}),j.imageUrl&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:j.imageUrl.message})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d(),{href:"/assets",className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:b,className:"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:b?"Creating...":"Create Asset"})]})]})]})})]})})}},7872:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(5155),a=t(8500),i=t.n(a);function l({items:e}){return(0,r.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,r.jsx)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:e.map((e,s)=>(0,r.jsxs)("li",{className:"inline-flex items-center",children:[s>0&&(0,r.jsx)("svg",{className:"w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10",children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m1 9 4-4-4-4"})}),e.href?(0,r.jsx)(i(),{href:e.href,className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",children:e.label}):(0,r.jsx)("span",{className:"text-sm font-medium text-gray-500",children:e.label})]},s))})})}}},e=>{e.O(0,[8500,3530,6802,8441,3794,7358],()=>e(e.s=79)),_N_E=e.O()}]);