"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3552],{3321:(e,t,s)=>{var n=s(4645);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},7064:(e,t,s)=>{s.d(t,{CP:()=>er,Jv:()=>es,CI:()=>en,wV:()=>Y});var n=s(5155),r=s(2115);class a extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class o extends a{}o.kind="signIn";class i extends a{}i.type="AdapterError";class c extends a{}c.type="AccessDenied";class l extends a{}l.type="CallbackRouteError";class d extends a{}d.type="ErrorPageLoop";class u extends a{}u.type="EventError";class h extends a{}h.type="InvalidCallbackUrl";class p extends o{constructor(){super(...arguments),this.code="credentials"}}p.type="CredentialsSignin";class f extends a{}f.type="InvalidEndpoints";class w extends a{}w.type="InvalidCheck";class y extends a{}y.type="JWTSessionError";class v extends a{}v.type="MissingAdapter";class g extends a{}g.type="MissingAdapterMethods";class E extends a{}E.type="MissingAuthorize";class x extends a{}x.type="MissingSecret";class S extends o{}S.type="OAuthAccountNotLinked";class m extends o{}m.type="OAuthCallbackError";class b extends a{}b.type="OAuthProfileParseError";class _ extends a{}_.type="SessionTokenError";class L extends o{}L.type="OAuthSignInError";class U extends o{}U.type="EmailSignInError";class R extends a{}R.type="SignOutError";class k extends a{}k.type="UnknownAction";class A extends a{}A.type="UnsupportedStrategy";class C extends a{}C.type="InvalidProvider";class T extends a{}T.type="UntrustedHost";class P extends a{}P.type="Verification";class $ extends o{}$.type="MissingCSRF";class N extends a{}N.type="DuplicateConditionalUI";class I extends a{}I.type="MissingWebAuthnAutocomplete";class M extends a{}M.type="WebAuthnVerificationError";class O extends o{}O.type="AccountNotLinked";class X extends a{}X.type="ExperimentalFeatureNotEnabled";class H extends a{}class j extends a{}async function V(e,t,s,n={}){let r=`${W(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...n?.headers?.cookie?{cookie:n.headers.cookie}:{}}};n?.body&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(r,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new H(e.message,e)),null}}function W(e){return e.basePath}function D(){return Math.floor(Date.now()/1e3)}function F(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let s=new URL(e||t),n=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),r=`${s.origin}${n}`;return{origin:s.origin,host:s.host,path:n,base:r,toString:()=>r}}var J=s(1463);let B={baseUrl:F(J.env.NEXTAUTH_URL??J.env.VERCEL_URL).origin,basePath:F(J.env.NEXTAUTH_URL).path,baseUrlServer:F(J.env.NEXTAUTH_URL_INTERNAL??J.env.NEXTAUTH_URL??J.env.VERCEL_URL).origin,basePathServer:F(J.env.NEXTAUTH_URL_INTERNAL??J.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},q=null;function z(){return new BroadcastChannel("next-auth")}function G(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}:(null===q&&(q=z()),q)}let K={debug:console.debug,error:console.error,warn:console.warn},Q=r.createContext?.(void 0);function Y(e){if(!Q)throw Error("React Context is unavailable in Server Components");let t=r.useContext(Q),{required:s,onUnauthenticated:n}=e??{},a=s&&"unauthenticated"===t.status;return(r.useEffect(()=>{if(a){let e=`${B.basePath}/signin?${new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href})}`;n?n():window.location.href=e}},[a,n]),a)?{data:t.data,update:t.update,status:"loading"}:t}async function Z(e){let t=await V("session",B,K,e);return(e?.broadcast??!0)&&z().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function ee(){let e=await V("csrf",B,K);return e?.csrfToken??""}async function et(){return V("providers",B,K)}async function es(e,t,s){let{redirect:n=!0}=t??{},r=t?.redirectTo??t?.callbackUrl??window.location.href,a=W(B),o=await et();if(!o){window.location.href=`${a}/error`;return}if(!e||!(e in o)){window.location.href=`${a}/signin?${new URLSearchParams({callbackUrl:r})}`;return}let i="credentials"===o[e].type,c="email"===o[e].type,l=`${a}/${i?"callback":"signin"}/${e}`,d=await ee(),u=await fetch(`${l}?${new URLSearchParams(s)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:d,callbackUrl:r})}),h=await u.json();if(n||!(i||c)){let e=h.url??r;window.location.href=e,e.includes("#")&&window.location.reload();return}let p=new URL(h.url).searchParams.get("error"),f=new URL(h.url).searchParams.get("code");return u.ok&&await B._getSession({event:"storage"}),{error:p,code:f,status:u.status,ok:u.ok,url:p?null:h.url}}async function en(e){let t=e?.redirectTo??e?.callbackUrl??window.location.href,s=W(B),n=await ee(),r=await fetch(`${s}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:n,callbackUrl:t})}),a=await r.json();if(G().postMessage({event:"session",data:{trigger:"signout"}}),e?.redirect??!0){let e=a.url??t;window.location.href=e,e.includes("#")&&window.location.reload();return}return await B._getSession({event:"storage"}),a}function er(e){if(!Q)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:s,refetchInterval:a,refetchWhenOffline:o}=e;s&&(B.basePath=s);let i=void 0!==e.session;B._lastSync=i?D():0;let[c,l]=r.useState(()=>(i&&(B._session=e.session),e.session)),[d,u]=r.useState(!i);r.useEffect(()=>(B._getSession=async({event:e}={})=>{try{let t="storage"===e;if(t||void 0===B._session){B._lastSync=D(),B._session=await Z({broadcast:!t}),l(B._session);return}if(!e||null===B._session||D()<B._lastSync)return;B._lastSync=D(),B._session=await Z(),l(B._session)}catch(e){K.error(new j(e.message,e))}finally{u(!1)}},B._getSession(),()=>{B._lastSync=0,B._session=void 0,B._getSession=()=>{}}),[]),r.useEffect(()=>{let e=()=>B._getSession({event:"storage"});return G().addEventListener("message",e),()=>G().removeEventListener("message",e)},[]),r.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,s=()=>{t&&"visible"===document.visibilityState&&B._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",s,!1),()=>document.removeEventListener("visibilitychange",s,!1)},[e.refetchOnWindowFocus]);let h=function(){let[e,t]=r.useState("undefined"!=typeof navigator&&navigator.onLine),s=()=>t(!0),n=()=>t(!1);return r.useEffect(()=>(window.addEventListener("online",s),window.addEventListener("offline",n),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}),[]),e}(),p=!1!==o||h;r.useEffect(()=>{if(a&&p){let e=setInterval(()=>{B._session&&B._getSession({event:"poll"})},1e3*a);return()=>clearInterval(e)}},[a,p]);let f=r.useMemo(()=>({data:c,status:d?"loading":c?"authenticated":"unauthenticated",async update(e){if(d)return;u(!0);let t=await V("session",B,K,void 0===e?void 0:{body:{csrfToken:await ee(),data:e}});return u(!1),t&&(l(t),G().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[c,d]);return(0,n.jsx)(Q.Provider,{value:f,children:t})}}}]);